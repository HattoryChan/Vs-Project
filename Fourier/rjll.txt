// Fourier.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include "iostream"
#include "math.h"
#include "windows.h"
#include "fstream"

using namespace std;

#define pi 3.14159265358979323846

int main()
{
	ifstream fin("sin.txt");   //??????? ?????? ??? ?????? ? ???????

	ofstream TxtWriteFi;
	TxtWriteFi.open("fourFi.txt");

	ofstream TxtWriteAmp;
	TxtWriteAmp.open("fourAmp.txt");

	double g_aValueDoubl[10000];  //???????? ?? ?????
	double FourierImValue;		  // ???????? ?????
	double FourierReValue;        // ?????? ?????
	double AmpValue;             // ?????????	
	double FiValue;              // ????
	int NumLast;				// ????? ?????????? ???????? ? ?????
	int ValueCount = 1000;		//?????????? ????? ? ?????	
	int M = 999;        //?????????? ????????? ?????

	for (int i = 0; i<ValueCount; i++)   //????????? ???????? ?? ?????
	{
		NumLast = 0;		//??? ????? ?????? ????????? ?????
		fin >> NumLast;	//?????
		fin >> g_aValueDoubl[i];	//????????	

	}	
	for (int k = 0; k < 500; k++)       //Xn
	{			
		FourierReValue = FourierImValue = 0;   //???????? ?????? ????????
		for (int i = 0; i < M; i++)      //???????????? ???????? ? ???????????? ??????
		{
			FourierReValue += g_aValueDoubl[i] * cos(2 * pi / M * k*i);
			FourierImValue -= g_aValueDoubl[i] * sin(2 * pi / M * k*i);
		}
		AmpValue = sqrt(FourierReValue*FourierReValue + FourierImValue*FourierImValue);			//?????? ?????????
		if (AmpValue < 100) //??????? "???????" ?????? ??? ?
			AmpValue = 0;
		FiValue = atan2(FourierImValue, FourierReValue);			//????

		TxtWriteAmp << k << '\t' << AmpValue << endl;			//?????? ? ????
		TxtWriteFi << k << '\t' <<  FiValue << endl;
	}
	TxtWriteAmp.close();  //????????? ?????? ?????? ? ???????
	TxtWriteFi.close();
	fin.close();
	
	system("pause");
    return 0;
}


